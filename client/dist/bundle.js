angular.module("gccweb",["ngRoute","ngResource","angular-inview"]).controller("documentController",["$scope","Preloader",function(e,t){e.elementInView=function(e,t){e&&t.element.removeClass("fade")},e.isLoading=!0,e.isSuccessful=!1,e.imageLocations=["./assets/images/home/philly.jpg"],t.preloadImages(e.imageLocations).then(function(t){e.isLoading=!1,e.isSuccessful=!0},function(t){e.isLoading=!1,e.isSuccessful=!1})}]),angular.module("gccweb").config(["$routeProvider","$locationProvider",function(e,t){t.hashPrefix(""),e.when("/",{templateUrl:"assets/templates/home.html",resolve:{images:["Preloader",function(e){e.preloadImages(["assets/images/home/philly.jpg"])}]}}).when("/about",{templateUrl:"assets/templates/about/about.html",resolve:{images:["Preloader",function(e){e.preloadImages(["assets/images/about/jumbotron.jpg"])}]}}).when("/about/ami",{templateUrl:"assets/templates/about/ami.html"}).when("/about/staff",{templateUrl:"assets/templates/about/staff.html"}).when("/about/believe",{templateUrl:"assets/templates/about/believe.html"}).when("/about/imnew",{templateUrl:"assets/templates/about/imnew.html"}).when("/familygroup",{templateUrl:"assets/templates/familygroup/familygroup.html",resolve:{images:["Preloader",function(e){e.preloadImages(["assets/images/familygroup/jumbotron.jpeg"])}]}}).when("/giving",{templateUrl:"assets/templates/giving/giving.html",resolve:{images:["Preloader",function(e){e.preloadImages(["assets/images/giving/jumbotron.jpeg"])}]}}).when("/ministries",{templateUrl:"assets/templates/ministries/ministries.html",resolve:{images:["Preloader",function(e){e.preloadImages(["assets/images/ministries/jumbotron.jpeg"])}]}}).when("/multimedia",{templateUrl:"assets/templates/multimedia/multimedia.html"}).when("/calendar",{templateUrl:"assets/templates/calendar/calendar.html"})}]),angular.module("gccweb").controller("staffController",["$scope","Staff",function(e,t){e.staffList=t.query()}]).controller("believeController",["$scope","Believe",function(e,t){e.believeList=t.query(),e.tab=-1,e.select=function(t){e.tab==t?e.tab=-1:e.tab=t}}]),angular.module("gccweb").controller("mainAnnouncementsController",["$scope","MainAnnouncement",function(e,t){e.ma=t.query()}]).controller("smallAnnouncementsController",["$scope","SmallAnnouncement",function(e,t){e.sa=t.query()}]).controller("memoryVerseController",["$scope","MemoryVerse",function(e,t){var n=t.query(function(){e.mv=n[0]})}]),angular.module("gccweb").controller("ministryController",["$scope","Ministry",function(e,t){e.ministriesList=t.query(function(){e.getSizeArray=function(){return Array(Math.ceil(e.ministriesList.length/4))},e.getRow=function(t){var n=4*t,o=n+4,i=e.ministriesList.slice(n,o);return i}})}]),angular.module("gccweb").directive("ministryInfo",["$rootScope",function(e){return{restrict:"E",templateUrl:"assets/templates/ministries/info.html",scope:{list:"=",currentIndex:"=",row:"="},link:function(t,n,o){e.$on("tileClick",function(e,o){if(t.row==o.row){var i=t.findIndex(t.row,o.col),s=t.list[i];t.name=s.name,t.pic=s.pic,t.coordinator=s.coordinator,t.contact=s.contact,t.privileges=s.privileges,t.timeCommitment=s.timeCommitment,t.$apply(),n.show(),$("html, body").stop(!0).animate({scrollTop:n.offset().top-100},500)}else n.hide()})},controller:["$scope",function(e){e.findIndex=function(e,t){return 4*e+t}}]}}]),angular.module("gccweb").directive("ministryTile",["$rootScope",function(e){return{restrict:"E",templateUrl:"assets/templates/ministries/tile.html",scope:{name:"=",pic:"=",row:"=",col:"="},link:function(t,n,o){n.on("click",function(){e.$emit("tileClick",{row:t.row,col:t.col})})}}}]),angular.module("gccweb").directive("siteFooter",function(){return{restrict:"E",templateUrl:"assets/templates/siteFooter.html"}}),angular.module("gccweb").directive("siteNav",function(){return{restrict:"E",templateUrl:"assets/templates/siteNav.html"}}),angular.module("gccweb").factory("Staff",["$resource",function(e){return e("/staff",{},{})}]).factory("Believe",["$resource",function(e){return e("/believe",{},{})}]),angular.module("gccweb").factory("MainAnnouncement",["$resource",function(e){return e("/mainAnnouncement",{},{})}]).factory("SmallAnnouncement",["$resource",function(e){return e("/smallAnnouncement",{},{})}]).factory("MemoryVerse",["$resource",function(e){return e("/memoryVerse",{},{})}]),angular.module("gccweb").factory("Ministry",["$resource",function(e){return e("/ministry",{},{})}]),angular.module("gccweb").factory("Preloader",["$q","$rootScope",function(e,t){function n(t){this.imageLocations=t,this.imageCount=this.imageLocations.length,this.loadCount=0,this.errorCount=0,this.states={PENDING:1,LOADING:2,RESOLVED:3,REJECTED:4},this.state=this.states.PENDING,this.deferred=e.defer(),this.promise=this.deferred.promise}return n.preloadImages=function(e){var t=new n(e);return t.load()},n.prototype={constructor:n,isInitiated:function(){return this.state!==this.states.PENDING},isRejected:function(){return this.state===this.states.REJECTED},isResolved:function(){return this.state===this.states.RESOLVED},load:function(){if(this.isInitiated())return this.promise;this.state=this.states.LOADING;for(var e=0;e<this.imageCount;e++)this.loadImageLocation(this.imageLocations[e]);return this.promise},handleImageError:function(e){this.errorCount++,this.isRejected()||(this.state=this.states.REJECTED,this.deferred.reject(e))},handleImageLoad:function(e){this.loadCount++,this.isRejected()||(this.deferred.notify({percent:Math.ceil(this.loadCount/this.imageCount*100),imageLocation:e}),this.loadCount===this.imageCount&&(this.state=this.states.RESOLVED,this.deferred.resolve(this.imageLocations)))},loadImageLocation:function(e){var n=this,o=$(new Image).on({load:function(e){t.$apply(function(){n.handleImageLoad(e.target.src),n=o=e=null})},error:function(e){t.$apply(function(){n.handleImageError(e.target.src),n=o=e=null})}}).prop("src",e)}},n}]);